
<p>These examples use the <code>EntityTrait</code></p>

<pre><code>$extract = \Drupal::service('itls.extract')-&gt;setEntity($entity_type, $entity);
$default_value = 'lorem';
</code></pre>

<h2>Fields</h2>

<p>When working with fields you probabably want to do one of:</p>

<ul>
<li>Get the raw value of field item (value, uri, target_id, etc).</li>
<li>Display to the end user said value.</li>
<li>Get the array of a field item.</li>
<li>Get an array of all items for a field.</li>
</ul>

<p>The goal of <code>EntityTrait</code> is to make these goals very, very simple for the developer.  So the signature of the methods reflect this.  Default values are required as a means of fallback.</p>

<h3>Display to the end user said value</h3>

<p>These are all equivalent and give you the escaped version of <code>$entity-&gt;field_pull_quote[{language}][0]['value']</code> ready for output to the browser.</p>

<pre><code>$extract-&gt;safe('lorem', 'field_pull_quote'),
$extract-&gt;safe('lorem', 'field_pull_quote', 'value'),
$extract-&gt;safe('lorem', 'field_pull_quote', 'value', 0),
$extract-&gt;safe('lorem', 'field_pull_quote', 0, 'value'),
</code></pre>

<p>If you need the value of the second item in the array, you have fewer choices, but here's how.</p>

<pre><code>$extract-&gt;safe('lorem', 'field_pull_quote', 'value', 1),
$extract-&gt;safe('lorem', 'field_pull_quote', 1, 'value'),  
</code></pre>

<p>And if you need a different column, you'll do:</p>

<pre><code>$extract-&gt;safe('lorem', 'field_pull_quote', 'target_id'),
$extract-&gt;safe('lorem', 'field_pull_quote', 'target_id', 0),
$extract-&gt;safe('lorem', 'field_pull_quote', 0, 'target_id'),
</code></pre>

<p>Or.. for the second <code>target_id</code>:</p>

<pre><code>$extract-&gt;safe('lorem', 'field_pull_quote', 'target_id', 1),
$extract-&gt;safe('lorem', 'field_pull_quote', 1, 'target_id'),  
</code></pre>

<h4>Get the array of a field item.</h4>

<pre><code>$extract-&gt;safe('lorem', 'field_pull_quote', 0),

Array
(
    [target_id] =&gt; 12
)
</code></pre>

<h3>Get an array of all items for a field.</h3>

<p>Use the <code>items</code> method.</p>

<pre><code>$extract-&gt;items('field_pull_quote'),

Array
(
    [0] =&gt; Array
        (
            [target_id] =&gt; 10
        )

    [1] =&gt; Array
        (
            [target_id] =&gt; 12
        )

)
</code></pre>
